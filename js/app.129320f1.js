(function(){"use strict";var t={3217:function(t,e,r){var n=r(3751),i=r(641),o=r(33);const a=t=>((0,i.Qi)("data-v-57f89019"),t=t(),(0,i.jt)(),t),s={class:"flex flex-col items-center justify-center min-h-screen bg-green-100"},l=a((()=>(0,i.Lk)("h1",{class:"text-4xl font-bold mb-4"},"オセロ",-1))),u={class:"mb-4"},h={class:"mr-4"},c={class:"board"},f=["onClick","disabled"],v={class:"mt-4"},b={key:0,class:"text-xl font-bold"},d={key:1,class:"text-xl"},m={class:"mt-4 space-x-4"};function p(t,e,r,n,a,p){return(0,i.uX)(),(0,i.CE)("div",s,[l,(0,i.Lk)("div",u,[(0,i.Lk)("span",h,"黒: "+(0,o.v_)(p.blackCount),1),(0,i.Lk)("span",null,"白: "+(0,o.v_)(p.whiteCount),1)]),(0,i.Lk)("div",c,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(a.board,((t,e)=>((0,i.uX)(),(0,i.CE)(i.FK,null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(t,((t,r)=>((0,i.uX)(),(0,i.CE)("button",{key:`${e}-${r}`,class:(0,o.C4)([{"bg-green-500":t===a.EMPTY,"bg-black":t===a.BLACK,"bg-white":t===a.WHITE},"cell"]),onClick:t=>p.makeMove(e,r),disabled:a.gameOver||t!==a.EMPTY||a.isCPUOpponent&&a.currentPlayer===a.WHITE},null,10,f)))),128))],64)))),256))]),(0,i.Lk)("div",v,[a.gameOver?((0,i.uX)(),(0,i.CE)("p",b," ゲーム終了! "+(0,o.v_)(p.blackCount>p.whiteCount?"黒":p.whiteCount>p.blackCount?"白":"引き分け")+"の勝ち! ",1)):((0,i.uX)(),(0,i.CE)("p",d,"現在の手番: "+(0,o.v_)(a.currentPlayer===a.BLACK?"黒":"白"),1))]),(0,i.Lk)("div",m,[(0,i.Lk)("button",{class:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",onClick:e[0]||(e[0]=(...t)=>p.resetGame&&p.resetGame(...t))},"ゲームをリセット"),(0,i.Lk)("button",{class:"px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600",onClick:e[1]||(e[1]=(...t)=>p.toggleCPUOpponent&&p.toggleCPUOpponent(...t))},(0,o.v_)(a.isCPUOpponent?"2人プレイに切り替え":"CPUと対戦"),1)])])}r(4114);const g=8,C=0,k=1,P=2,y=[[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,0],[1,1]],O=()=>{const t=Array(g).fill().map((()=>Array(g).fill(C))),e=g/2;return t[e-1][e-1]=P,t[e-1][e]=k,t[e][e-1]=k,t[e][e]=P,t},M=[[120,-20,20,5,5,20,-20,120],[-20,-40,-5,-5,-5,-5,-40,-20],[20,-5,15,3,3,15,-5,20],[5,-5,3,3,3,3,-5,5],[5,-5,3,3,3,3,-5,5],[20,-5,15,3,3,15,-5,20],[-20,-40,-5,-5,-5,-5,-40,-20],[120,-20,20,5,5,20,-20,120]];var x={data(){return{board:O(),currentPlayer:k,gameOver:!1,isCPUOpponent:!1,timer:null,BLACK:k,WHITE:P,EMPTY:C}},computed:{blackCount(){return this.board.flat().filter((t=>t===this.BLACK)).length},whiteCount(){return this.board.flat().filter((t=>t===this.WHITE)).length}},watch:{board:"handleBoardChange",currentPlayer:"handleCurrentPlayerChange"},methods:{handleBoardChange(){this.isCPUOpponent&&this.currentPlayer===this.WHITE&&!this.gameOver&&(clearTimeout(this.timer),this.timer=setTimeout(this.makeCPUMove,1e3))},handleCurrentPlayerChange(){this.canMove(this.board,this.currentPlayer)||(this.canMove(this.board,3-this.currentPlayer)?this.currentPlayer=3-this.currentPlayer:this.gameOver=!0)},canMove(t,e){for(let r=0;r<g;r++)for(let n=0;n<g;n++)if(this.isValidMove(t,r,n,e))return!0;return!1},isValidMove(t,e,r,n){if(t[e][r]!==C)return!1;for(const[i,o]of y){let a=e+i,s=r+o,l=!1;while(a>=0&&a<g&&s>=0&&s<g){if(t[a][s]===C)break;if(t[a][s]===n){if(l)return!0;break}l=!0,a+=i,s+=o}}return!1},makeMove(t,e){if(this.gameOver||!this.isValidMove(this.board,t,e,this.currentPlayer))return;const r=this.board.map((t=>[...t]));r[t][e]=this.currentPlayer;for(const[n,i]of y){let o=t+n,a=e+i;const s=[];while(o>=0&&o<g&&a>=0&&a<g){if(r[o][a]===C)break;if(r[o][a]===this.currentPlayer){for(const[t,e]of s)r[t][e]=this.currentPlayer;break}s.push([o,a]),o+=n,a+=i}}this.board=r,this.currentPlayer=3-this.currentPlayer},evaluateBoard(t,e){let r=0;for(let n=0;n<g;n++)for(let i=0;i<g;i++)t[n][i]===e?r+=M[n][i]:t[n][i]===3-e&&(r-=M[n][i]);return r},getValidMoves(t,e){const r=[];for(let n=0;n<g;n++)for(let i=0;i<g;i++)this.isValidMove(t,n,i,e)&&r.push([n,i]);return r},minimax(t,e,r,n,i){if(0===e||!this.canMove(t,this.BLACK)&&!this.canMove(t,this.WHITE))return this.evaluateBoard(t,this.WHITE);const o=r?this.WHITE:this.BLACK,a=this.getValidMoves(t,o);if(r){let r=-1/0;for(const[s,l]of a){const a=t.map((t=>[...t]));this.makeMove(a,s,l,o);const u=this.minimax(a,e-1,!1,n,i);if(r=Math.max(r,u),n=Math.max(n,u),i<=n)break}return r}{let r=1/0;for(const[s,l]of a){const a=t.map((t=>[...t]));this.makeMove(a,s,l,o);const u=this.minimax(a,e-1,!0,n,i);if(r=Math.min(r,u),i=Math.min(i,u),i<=n)break}return r}},makeCPUMove(){const t=this.getValidMoves(this.board,this.WHITE);let e=-1/0,r=null;for(const[n,i]of t){const t=this.board.map((t=>[...t]));t[n][i]=this.WHITE;const o=this.minimax(t,3,!1,-1/0,1/0);o>e&&(e=o,r=[n,i])}r&&this.makeMove(r[0],r[1])},resetGame(){this.board=O(),this.currentPlayer=this.BLACK,this.gameOver=!1},toggleCPUOpponent(){this.isCPUOpponent=!this.isCPUOpponent},getClass(t){return t===C?"bg-green-500":t===this.BLACK?"bg-black":"bg-white"}},beforeUnmount(){clearTimeout(this.timer)}},E=r(6262);const w=(0,E.A)(x,[["render",p],["__scopeId","data-v-57f89019"]]);var T=w;(0,n.Ef)(T).mount("#app")}},e={};function r(n){var i=e[n];if(void 0!==i)return i.exports;var o=e[n]={exports:{}};return t[n].call(o.exports,o,o.exports,r),o.exports}r.m=t,function(){var t=[];r.O=function(e,n,i,o){if(!n){var a=1/0;for(h=0;h<t.length;h++){n=t[h][0],i=t[h][1],o=t[h][2];for(var s=!0,l=0;l<n.length;l++)(!1&o||a>=o)&&Object.keys(r.O).every((function(t){return r.O[t](n[l])}))?n.splice(l--,1):(s=!1,o<a&&(a=o));if(s){t.splice(h--,1);var u=i();void 0!==u&&(e=u)}}return e}o=o||0;for(var h=t.length;h>0&&t[h-1][2]>o;h--)t[h]=t[h-1];t[h]=[n,i,o]}}(),function(){r.d=function(t,e){for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={524:0};r.O.j=function(e){return 0===t[e]};var e=function(e,n){var i,o,a=n[0],s=n[1],l=n[2],u=0;if(a.some((function(e){return 0!==t[e]}))){for(i in s)r.o(s,i)&&(r.m[i]=s[i]);if(l)var h=l(r)}for(e&&e(n);u<a.length;u++)o=a[u],r.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return r.O(h)},n=self["webpackChunknew_othello_game"]=self["webpackChunknew_othello_game"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=r.O(void 0,[504],(function(){return r(3217)}));n=r.O(n)})();
//# sourceMappingURL=app.129320f1.js.map